---
title: 'Mdx ç³»åˆ—å…¨è§£ï¼ˆ1ï¼‰ unified'
date: '2025-09-09'
excerpt: 'ä»‹ç» unified åº“ï¼Œå®ƒæ˜¯ MDX ç³»åˆ—æ–‡ç« çš„æ ¸å¿ƒåº“ï¼Œç”¨äºè§£æå’Œè½¬æ¢ MDX å†…å®¹ã€‚'
tags: ['MDX', 'unified']
series: 'MDX ç³»åˆ—å…¨è§£'
---

# unified

æœ¬æ–‡æ˜¯ MDX ç³»åˆ—å…¨è§£çš„ç¬¬ä¸€ç¯‡çš„æ–‡ç« ï¼Œä¸»è¦ä»‹ç» unified åº“ï¼Œå®ƒæ˜¯ MDX ç³»åˆ—æ–‡ç« çš„æ ¸å¿ƒåº“ï¼Œç”¨äºè§£æå’Œè½¬æ¢ MDX å†…å®¹ã€‚

åœ¨æ•´ä¸ªMDXçš„ä½“ç³»ä¸­ ä»–æ˜¯åº•å±‚åŸºç¡€è®¾æ–½, ä¸ä»…å¯ä»¥å¤„ç† markdown html è¿˜æ˜¯å¤„ç†çº¯æ–‡æœ¬è¯­è¨€ æˆ–è€…å…¶ä»–å†…å®¹ ç„¶åå°†å®ƒä»¬è½¬åŒ–æˆç»“æ„åŒ–è¯­æ³•ã€‚

åœ¨è¿™ä¸ªæµç¨‹ä¸­ ä½ ä¸éœ€è¦æ‰‹åŠ¨å–å¤„ç† `syntax`è·Ÿ`parser` ç›´æ¥ä½¿ç”¨unified æä¾›çš„api å°±å¯ä»¥å®Œæˆè¿™ä¸ªè¿‡ç¨‹ã€‚

å…·ä½“çš„æµç¨‹å›¾å¦‚ä¸‹æ‰€ç¤º

```mermaid
graph TD
    %% è¾“å…¥é˜¶æ®µ
    A["ğŸ“„ è¾“å…¥æ–‡æœ¬<br/>(ä»»æ„æ ¼å¼)"] --> B{åˆ¤æ–­æ–‡æœ¬ç±»å‹}
    
    B -->|Markdown| MD["ğŸ“ Markdown æ–‡æœ¬<br/>`# Hello *world*`"]
    B -->|HTML| HTML["ğŸŒ HTML æ–‡æœ¬<br/>`<h1>Hello <em>world</em></h1>`"]
    B -->|è‡ªç„¶è¯­è¨€| NL["ğŸ—£ï¸ è‡ªç„¶è¯­è¨€æ–‡æœ¬<br/>`Hello world. How are you?`"]
    
    %% è§£æé˜¶æ®µ - ä¸åŒçš„ Parser
    MD --> P1["ğŸ” remark-parse<br/>(Markdown Parser)"]
    HTML --> P2["ğŸ” rehype-parse<br/>(HTML Parser)"]
    NL --> P3["ğŸ” retext-english<br/>(NL Parser)"]
    
    %% AST ç”Ÿæˆ
    P1 --> AST1["ğŸŒ³ mdast<br/>(Markdown AST)"]
    P2 --> AST2["ğŸŒ³ hast<br/>(HTML AST)"]
    P3 --> AST3["ğŸŒ³ nlcst<br/>(Natural Language AST)"]
    
    %% Unified æ ¸å¿ƒå¤„ç†
    AST1 --> CORE["âš™ï¸ Unified æ ¸å¿ƒå¤„ç†å™¨<br/>ç»Ÿä¸€çš„æ’ä»¶æ¶æ„"]
    AST2 --> CORE
    AST3 --> CORE
    
    %% æ’ä»¶å¤„ç†é˜¶æ®µ
    CORE --> PLUGINS["ğŸ§© æ’ä»¶å¤„ç†é“¾"]
    
    PLUGINS --> TRANS["ğŸ”„ Transformer æ’ä»¶"]
    TRANS --> T1["ğŸ¨ è¯­æ³•é«˜äº®<br/>(remark-highlight)"]
    TRANS --> T2["ğŸ”— é“¾æ¥å¤„ç†<br/>(remark-wiki-link)"]
    TRANS --> T3["ğŸ“ æ•°å­¦å…¬å¼<br/>(remark-math)"]
    TRANS --> T4["ğŸ“Š è¡¨æ ¼å¤„ç†<br/>(remark-gfm)"]
    TRANS --> T5["âœï¸ è¯­æ³•æ£€æŸ¥<br/>(retext-spell)"]
    TRANS --> T6["ğŸŒ HTML æ¸…ç†<br/>(rehype-sanitize)"]
    
    %% è½¬æ¢é˜¶æ®µ
    T1 --> CONVERT["ğŸ”„ æ ¼å¼è½¬æ¢å™¨"]
    T2 --> CONVERT
    T3 --> CONVERT
    T4 --> CONVERT
    T5 --> CONVERT
    T6 --> CONVERT
    
    CONVERT --> C1["ğŸ“â¡ï¸ğŸŒ mdast â†’ hast<br/>(remark-rehype)"]
    CONVERT --> C2["ğŸŒâ¡ï¸ğŸ“ hast â†’ mdast<br/>(rehype-remark)"]
    CONVERT --> C3["ğŸ“â¡ï¸âš›ï¸ mdast â†’ JSX<br/>(MDX å¤„ç†)"]
    
    %% ç¼–è¯‘è¾“å‡ºé˜¶æ®µ
    C1 --> COMPILE["ğŸ“¤ ç¼–è¯‘å™¨ (Stringify)"]
    C2 --> COMPILE
    C3 --> COMPILE
    
    COMPILE --> O1["ğŸ“„ Markdown è¾“å‡º<br/>(remark-stringify)"]
    COMPILE --> O2["ğŸŒ HTML è¾“å‡º<br/>(rehype-stringify)"]
    COMPILE --> O3["âš›ï¸ JSX ç»„ä»¶<br/>(MDX è¾“å‡º)"]
    COMPILE --> O4["ğŸ“Š ç»“æ„åŒ–æ•°æ®<br/>(JSON/YAML)"]
    
    %% å®é™…åº”ç”¨
    O1 --> APP["ğŸš€ å®é™…åº”ç”¨"]
    O2 --> APP
    O3 --> APP
    O4 --> APP
    
    APP --> USE1["ğŸ“š æ–‡æ¡£ç½‘ç«™<br/>(Docusaurus, VitePress)"]
    APP --> USE2["ğŸ“ åšå®¢ç³»ç»Ÿ<br/>(Gatsby, Next.js)"]
    APP --> USE3["ğŸ”§ å¼€å‘å·¥å…·<br/>(ESLint, Prettier)"]
    APP --> USE4["ğŸ“– å†…å®¹ç®¡ç†<br/>(CMS, ç¼–è¾‘å™¨)"]
    
    %% å…·ä½“ç¤ºä¾‹æµç¨‹
    subgraph example ["ğŸ’¡ å…·ä½“ç¤ºä¾‹ï¼šMarkdown â†’ HTML"]
        EX1["# Hello *world*"] --> EX2["remark-parse"]
        EX2 --> EX3["mdast AST"]
        EX3 --> EX4["æ’ä»¶å¤„ç†"]
        EX4 --> EX5["remark-rehype"]
        EX5 --> EX6["hast AST"]
        EX6 --> EX7["rehype-stringify"]
        EX7 --> EX8["&lt;h1&gt;Hello &lt;em&gt;world&lt;/em&gt;&lt;/h1&gt;"]
    end
    
    %% æ ·å¼å®šä¹‰
    classDef inputStyle fill:#e3f2fd,stroke:#1976d2,stroke-width:2px
    classDef parserStyle fill:#f3e5f5,stroke:#7b1fa2,stroke-width:2px
    classDef astStyle fill:#e8f5e8,stroke:#388e3c,stroke-width:2px
    classDef coreStyle fill:#fff3e0,stroke:#f57c00,stroke-width:3px
    classDef pluginStyle fill:#fce4ec,stroke:#c2185b,stroke-width:2px
    classDef outputStyle fill:#f1f8e9,stroke:#689f38,stroke-width:2px
    classDef appStyle fill:#e0f2f1,stroke:#00796b,stroke-width:2px
    classDef exampleStyle fill:#fff8e1,stroke:#ffa000,stroke-width:1px
    
    class A,MD,HTML,NL inputStyle
    class P1,P2,P3 parserStyle
    class AST1,AST2,AST3 astStyle
    class CORE,PLUGINS,TRANS,CONVERT,COMPILE coreStyle
    class T1,T2,T3,T4,T5,T6,C1,C2,C3 pluginStyle
    class O1,O2,O3,O4 outputStyle
    class APP,USE1,USE2,USE3,USE4 appStyle
    class EX1,EX2,EX3,EX4,EX5,EX6,EX7,EX8 exampleStyle
```

æ ¹æ®ä¸Šé¢çš„æµç¨‹å›¾ åˆ†æ¥ä¸‹ æ•´ä¸ªç”Ÿæ€ç³»ç»Ÿ

## ç”Ÿæ€ç³»ç»Ÿ

è§£æå™¨

- [rehype](https://unifiedjs.com/explore/project/rehypejs/rehype/) -- HTML
- [remark](https://unifiedjs.com/explore/project/remarkjs/remark/) -- Markdown
- [retext](https://unifiedjs.com/explore/project/retextjs/retext/) -- Natural Language


è¯æ³•å®šä¹‰
- [esast](https://github.com/syntax-tree/esast) -- ECMAScript
- [mdast](https://github.com/syntax-tree/mdast) -- Markdown
- [hast](https://github.com/syntax-tree/hast) -- HTML
- [nlcst](https://github.com/syntax-tree/nlcst) -- Natural Language
- [unist](https://github.com/syntax-tree/unist) -- Universal Syntax Tree


## å·¥ä½œæµç¨‹

1. parser
  - å°†è¾“å…¥çš„æ–‡æœ¬è½¬æˆå¯¹å¯¹åº”çš„ASTæ ‘ æ¯”å¦‚markdownè½¬æˆmdast  htmlè½¬æˆhast è‡ªç„¶è¯­è¨€è½¬æˆnlcst
2. transform
  - å¯¹ASTæ ‘è¿›è¡Œè½¬æ¢ æ¯”å¦‚å°†mdastè½¬æ¢æˆhast å°†hastè½¬æ¢æˆmdast å°†è‡ªç„¶è¯­è¨€è½¬æ¢æˆnlcst å°†nlcstè½¬æ¢æˆè‡ªç„¶è¯­è¨€
  - åœ¨è¿™ä¸ªè¿‡ç¨‹ä¸­ ä½ å¯ä»¥ä½¿ç”¨æ’ä»¶æ¥å¯¹ASTæ ‘è¿›è¡Œè½¬æ¢ æ¯”å¦‚ä½¿ç”¨remark-highlightæ¥å¯¹mdastè¿›è¡Œè¯­æ³•é«˜äº® ä½¿ç”¨remark-wiki-linkæ¥å¯¹mdastè¿›è¡Œé“¾æ¥å¤„ç† ä½¿ç”¨remark-mathæ¥å¯¹mdastè¿›è¡Œæ•°å­¦å…¬å¼å¤„ç† ä½¿ç”¨remark-gfmæ¥å¯¹mdastè¿›è¡Œè¡¨æ ¼å¤„ç† ä½¿ç”¨retext-spellæ¥å¯¹nlcstè¿›è¡Œè¯­æ³•æ£€æŸ¥ ä½¿ç”¨rehype-sanitizeæ¥å¯¹hastè¿›è¡ŒHTMLæ¸…ç†
3. stringify
  - å°†è½¬æ¢åçš„ASTæ ‘è½¬æˆå¯¹åº”çš„æ–‡æœ¬ æ¯”å¦‚å°†mdastè½¬æ¢æˆmarkdown å°†hastè½¬æ¢æˆhtml å°†è‡ªç„¶è¯­è¨€è½¬æ¢æˆè‡ªç„¶è¯­è¨€
  - åœ¨è¿™ä¸ªè¿‡ç¨‹ä¸­ ä½ å¯ä»¥ä½¿ç”¨æ’ä»¶æ¥å¯¹æ–‡æœ¬è¿›è¡Œè½¬æ¢æ¯”å¦‚ä½¿ç”¨remark-stringifyæ¥å¯¹mdastè¿›è¡Œmarkdownè½¬æ¢ ä½¿ç”¨rehype-stringifyæ¥å¯¹hastè¿›è¡Œhtmlè½¬æ¢ ä½¿ç”¨retext-stringifyæ¥å¯¹nlcstè¿›è¡Œè‡ªç„¶è¯­è¨€è½¬æ¢



## æ’ä»¶

### åŸºç¡€æ’ä»¶

- [remark-highlight](https://github.com/remarkjs/remark-highlight) -- è¯­æ³•é«˜äº®
- [remark-wiki-link](https://github.com/remarkjs/remark-wiki-link) -- é“¾æ¥å¤„ç†
- [remark-math](https://github.com/remarkjs/remark-math) -- æ•°å­¦å…¬å¼å¤„ç†
- [remark-gfm](https://github.com/remarkjs/remark-gfm) -- è¡¨æ ¼å¤„ç†
- [retext-spell](https://github.com/retextjs/retext-spell) -- è¯­æ³•æ£€æŸ¥
- [rehype-sanitize](https://github.com/rehypejs/rehype-sanitize) -- HTMLæ¸…ç†

### è½¬æ¢æ’ä»¶

- [remark-rehype](https://github.com/remarkjs/remark-rehype) -- markdownè½¬html
- [rehype-remark](https://github.com/rehypejs/rehype-remark) -- htmlè½¬markdown
- [remark-retext](https://github.com/remarkjs/remark-retext) -- markdownè½¬è‡ªç„¶è¯­è¨€
- [rehype-retext](https://github.com/rehypejs/rehype-retext) -- htmlè½¬è‡ªç„¶è¯­è¨€

## ä½¿ç”¨ç”¨ä¾‹
å› ä¸º unified æ•´ä¸ªæµç¨‹å¯ä»¥è½¬æ¢ä¸ç”¨çš„å†…å®¹æ ¼å¼ å› æ­¤é™¤äº†åœ¨ markdown åˆ°html çš„è½¬åŒ–å¤– è¿˜æœ‰å®Œæˆä¸€äº›è¾ƒä¸ºå¤æ‚çš„é›†æˆç”¨ä¾‹ã€‚
è¿™äº›éƒ½è¢«åšæˆäº†æ•´ä¸ªå¤æ‚çš„æ’ä»¶ä½“ç³»ã€‚

- [rehype-minify](https://github.com/rehypejs/rehype-minify) -- htmlå‹ç¼©
- [rehype-react](https://github.com/rehypejs/rehype-react) -- htmlè½¬reactç»„ä»¶
- [rehype-starry-night](https://github.com/rehypejs/rehype-starry-night) -- htmlè½¬starry-nightç»„ä»¶ ä»£ç é«˜äº®å±•ç¤º
- [remark-gfm](https://github.com/remarkjs/remark-gfm) -- gfmæ”¯æŒ
- [remark-directive](https://github.com/remarkjs/remark-directive) -- æŒ‡ä»¤æ”¯æŒ
- [remark-lint](https://github.com/remarkjs/remark-gfm) æ£€æŸ¥markdown ä»£ç æ ¼å¼
- [remark-toc](https://github.com/remarkjs/remark-toc) -- ç”Ÿæˆç›®å½•


å…¶å®è¿˜æœ‰ä¸€äº›å…³äº retext æ ¼å¼çš„æ’ä»¶ åé¢å¦‚æœæœ‰æœºä¼šçš„è¯ æˆ‘ä»¬ç»§ç»­è®²è§£ã€‚ è¿™æœŸä¸»è¦æ˜¯å…³äº remark æ’ä»¶ä½“ç³» ä»¥åŠ rehype æ’ä»¶ç³»ç»Ÿ



## å‚è€ƒ
- [å®˜æ–¹æ–‡æ¡£](https://unifiedjs.com/learn/guide/introduction-to-unified/)